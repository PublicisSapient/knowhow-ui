<div class="p-d-flex maturity-tablur-view p-flex-wrap">
    <div *ngFor="let item of listOfMaturityData;" class="p-d-flex data-item p-col-2 p-my-2 p-mx-5">
        <div class="icon-container">
            <div class="icon">
                <img src="../../../assets/img/{{ item.icon }}" alt="KPI Icon" class="kpi-logo" aria-hidden="true" />
            </div>
        </div>
        <div class="data">
            <p class="tabularKPI-column-header p-mb-0" tabindex="0">{{ item.category }}</p>
            <div class="p-d-flex">
                <p class="tabularKPI-column-value p-mt-0 p-mr-2" tabindex="0">{{ item.value}}</p>
                <p class="tabularKPI-column-value p-mt-0 p-mr-2" tabindex="0"><i class="pi pi-angle-up"
                        style="font-size: 1rem ; color: red;"></i></p>
                <p class="tabularKPI-column-value p-mt-0 p-mr-2" tabindex="0" style="color: red;"> +1 Projects</p>
            </div>
        </div>
    </div>
</div>

<div class="kpi-details-table-container p-mx-5">

    <div class="kpi-card-container">
        <div class="kpi-card-header p-pr-5 p-pl-3 p-jc-between">
            <div class="kpi-card-name-placeholder" role="region" aria-label="KPI Card Header">
                <div class="kpi-card-title-container">
                    <h3 tabindex="0" [attr.aria-label]="'KPI Details'"> Project Details & KPI
                    </h3>
                </div>
            </div>
        </div>

        <div class="kpi-card-body">
            <p-table [value]="tableData['data']" [columns]="tableData['columns']" responsiveLayout="scroll" class="mt-3">
                <ng-template pTemplate="header" let-columns>
                    <tr>
                        <ng-container *ngFor="let col of columns">
                            <th style="background-color: #f4f9ff;" [pSortableColumn]="sortableColumn(col.field)" id="{{col.field}}" > 
                                <div class="table-head">
                                    <span [ngStyle]="{'width':'max-content'}">{{col.header}}</span>
                                    <div class="p-d-flex p-ml-2">
                                        <p-columnFilter [field]="col.field" matchMode="in"
                                            [showMenu]="false" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false"
                                            [showClearButton]="false" [showApplyButton]="false" [style]="{'margin-top':'2px'}">
                                            <ng-template pTemplate="filter" let-value let-filter="filterCallback" #filter>
                                                <p-multiSelect resetFilterOnHide="true" autofocusFilter="true"
                                                    (onPanelShow)="onFilterClick(col.field)" (onPanelHide)="onFilterBlur(col.field)"
                                                    [options]="tableColumnData[col.field]" [placeholder]="'Select '+ col.field"
                                                    (onChange)="filter($event.value)" [optionValue]="'value'" [optionLabel]="'name'"
                                                    [ngModel]="tableColumnForm[col.field]" styleClass="column-filter"
                                                    (keydown.enter)="handleMultiSelectEnter($event)">
                                                    <ng-template pTemplate="selectedItems">
                                                        <i class="pi pi-filter-icon pi-filter" style="font-size: 0.8rem"></i>
                                                    </ng-template>
                                                </p-multiSelect>
                                            </ng-template>
                                        </p-columnFilter>
                                        <p-sortIcon [field]="sortableColumn(col.field)" aria-label="Sort by column"></p-sortIcon>
                                    </div>
                                </div>
                            </th>
                        </ng-container>
                    </tr>
                </ng-template>

                <ng-template pTemplate="body" let-row let-columns="columns">
                    <tr>
                        <td *ngFor="let col of columns">
                            <ng-container [ngSwitch]="col.field">

                                <span *ngSwitchCase="'name'">{{ row[col.field] }}</span>

                                <span *ngSwitchCase="'dora'">
                                    <div class="p-p-2 styled-cell" [ngClass]="getMClass(row[col.field])">
                                        {{ row[col.field] }}</div>
                                </span>

                                <span *ngSwitchCase="'completion'">{{ row[col.field] }}</span>

                                <div *ngSwitchCase="'health'">
                                    <div class="p-p-2 styled-cell" [ngClass]="getMClass(row[col.field])">
                                        {{ row[col.field] }}</div>
                                </div>
                                <div *ngSwitchCase="'speed'">
                                    <div class="p-p-2 styled-cell" [ngClass]="getMClass(row[col.field])">
                                        {{ row[col.field] }}</div>
                                </div>
                                <div *ngSwitchCase="'quality'" class="p-p-3">
                                    <div class="p-p-2 styled-cell" [ngClass]="getMClass(row[col.field])">
                                        {{ row[col.field] }}</div>
                                </div>
                                <div *ngSwitchCase="'value'" class="p-p-3">
                                    <div class="p-p-2 styled-cell" [ngClass]="getMClass(row[col.field])">
                                        {{ row[col.field] }}</div>
                                </div>

                            </ng-container>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>

<div class="kpi-details-table-container p-mx-5 p-mt-5">

    <div class="kpi-card-container">
        <div class="kpi-card-header p-pr-5 p-pl-3 p-jc-between">
            <div class="kpi-card-name-placeholder" role="region" aria-label="KPI Card Header">
                <div class="kpi-card-title-container">
                    <h3 tabindex="0" [attr.aria-label]="'KPI Details'"> Maturity Wheel
                    </h3>
                    <!-- <span *ngIf="true" class="info-icon" [style]="{'position': 'relative'}" role="button" tabindex="0"
                        aria-label="Show KPI Information">
                        <img alt="info" class="" src="../../../assets/img/Info.svg" aria-hidden="true" />
                    </span> -->
                </div>
            </div>
            <!-- <div #kpiMenuContainer class="kpi-menu-container" role="button" tabindex="0" aria-label="Open KPI Menu">
                <i class="pi pi-ellipsis-v" style="font-size: 20px" aria-hidden="true"></i>
            </div>
            <p-menu #kpimenu id="menu" [popup]="true" [model]="menuItems" aria-label="Actions Menu">
                <ng-template pTemplate="item" let-item>
                    <div role="menuitem" tabindex="0" [attr.aria-label]="item.label">
                        <i [class]="item.icon" aria-hidden="true"></i>
                        <span> {{ item.label }}</span>
                    </div>
                </ng-template>
            </p-menu> -->
        </div>

        <div class="kpi-card-body">
            <app-maturity #maturityComponent ></app-maturity>
        </div>
    </div>
</div>

